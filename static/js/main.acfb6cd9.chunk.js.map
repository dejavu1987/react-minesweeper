{"version":3,"sources":["lib/minesweeper.js","Minesweeper.jsx","App.jsx","index.js"],"names":["Minesweeper","level","this","boardMax","board","Array","fill","map","x","mines","length","newMine","randomMax","includes","push","filledBoard","getFilledBoard","max","Math","floor","random","mine","nw","isNaN","ne","n","sw","se","s","w","e","forEach","addMine","split","c","parseInt","CELL_OPEN","useState","setBoard","cellStates","setCellStates","totalMines","setTotalMines","useEffect","minesweeper","MinesweeperClass","className","row","y","cell","onClick","handleCellClick","onContextMenu","preventDefault","handleCellContextMenu","App","setLevel","htmlFor","onChange","target","value","type","min","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.acfb6cd9.chunk.js","sourcesContent":["export default class Minesweeper {\n  constructor(level) {\n    this.boardMax = 5 + level * 2;\n    this.board = new Array(this.boardMax)\n      .fill(\"\")\n      .map((x) => new Array(this.boardMax).fill(\"\"));\n\n    this.mines = [];\n\n    while (this.mines.length < level * level + 5) {\n      const newMine = `${this.randomMax(this.boardMax)},${this.randomMax(\n        this.boardMax\n      )}`;\n      if (!this.mines.includes(newMine)) this.mines.push(newMine);\n    }\n    this.filledBoard = this.getFilledBoard();\n  }\n\n  randomMax(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n  // @TODO Optimize?\n  addMine(mine, filledBoard) {\n    filledBoard[mine[0]][mine[1]] = \"üí£\";\n    if (mine[0] > 0) {\n      if (mine[1] > 0) {\n        let nw = filledBoard[mine[0] - 1][mine[1] - 1];\n        if (nw !== \"üí£\") {\n          filledBoard[mine[0] - 1][mine[1] - 1] = !isNaN(nw) ? ++nw : 1;\n        }\n      }\n      if (mine[1] < this.boardMax - 1) {\n        let ne = filledBoard[mine[0] - 1][mine[1] + 1];\n        if (ne !== \"üí£\") {\n          filledBoard[mine[0] - 1][mine[1] + 1] = !isNaN(ne) ? ++ne : 1;\n        }\n      }\n      let n = filledBoard[mine[0] - 1][mine[1]];\n      if (n !== \"üí£\") {\n        filledBoard[mine[0] - 1][mine[1]] = !isNaN(n) ? ++n : 1;\n      }\n    }\n    if (mine[0] < this.boardMax - 1) {\n      if (mine[1] > 0) {\n        let sw = filledBoard[mine[0] + 1][mine[1] - 1];\n        if (sw !== \"üí£\") {\n          filledBoard[mine[0] + 1][mine[1] - 1] = !isNaN(sw) ? ++sw : 1;\n        }\n      }\n      if (mine[1] < this.boardMax - 1) {\n        let se = filledBoard[mine[0] + 1][mine[1] + 1];\n        if (se !== \"üí£\") {\n          filledBoard[mine[0] + 1][mine[1] + 1] = !isNaN(se) ? ++se : 1;\n        }\n      }\n      let s = filledBoard[mine[0] + 1][mine[1]];\n      if (s !== \"üí£\") {\n        filledBoard[mine[0] + 1][mine[1]] = !isNaN(s) ? ++s : 1;\n      }\n    }\n    if (mine[1] > 0) {\n      let w = filledBoard[mine[0]][mine[1] - 1];\n      if (w !== \"üí£\") {\n        filledBoard[mine[0]][mine[1] - 1] = !isNaN(w) ? ++w : 1;\n      }\n    }\n    if (mine[1] < this.boardMax - 1) {\n      let e = filledBoard[mine[0]][mine[1] + 1];\n      if (e !== \"üí£\") {\n        filledBoard[mine[0]][mine[1] + 1] = !isNaN(e) ? ++e : 1;\n      }\n    }\n  }\n\n  getFilledBoard() {\n    const filledBoard = [...this.board];\n    this.mines.forEach((mine) => {\n      this.addMine(\n        mine.split(\",\").map((c) => parseInt(c)),\n        filledBoard\n      );\n    });\n    return filledBoard;\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport MinesweeperClass from \"./lib/minesweeper\";\nconst CELL_OPEN = \"open\";\nconst CELL_FLAGGED = \"flagged\";\n\nexport default function Minesweeper({ level }) {\n  const [board, setBoard] = useState([]);\n  const [cellStates, setCellStates] = useState({});\n  const [totalMines, setTotalMines] = useState(0);\n\n  useEffect(() => {\n    const minesweeper = new MinesweeperClass(level);\n    setBoard(minesweeper.filledBoard);\n    setTotalMines(minesweeper.mines.length);\n    setCellStates([]);\n  }, [level]);\n\n  const handleCellClick = (x, y) =>\n    setCellStates({\n      ...cellStates,\n      [`${x},${y}`]: CELL_OPEN\n    });\n\n  const handleCellContextMenu = (x, y) => {\n    setCellStates({\n      ...cellStates,\n      [`${x},${y}`]: CELL_FLAGGED\n    });\n  };\n\n  return (\n    <div className=\"minesweeper\">\n      <h4>üí£ {totalMines}</h4>\n      <div className=\"board\">\n        {board.map((row, y) => (\n          <div className=\"row\">\n            {row.map((cell, x) => (\n              <div\n                className={`col color-${cell} ${\n                  !cellStates[`${x},${y}`] ? \"not-open\" : \"\"\n                }`}\n                onClick={() => handleCellClick(x, y)}\n                onContextMenu={(e) => {\n                  e.preventDefault();\n                  handleCellContextMenu(x, y);\n                }}\n              >\n                {cellStates[`${x},${y}`] &&\n                  (cellStates[`${x},${y}`] === CELL_OPEN ? cell : \"üìç\")}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import \"./styles.css\";\nimport Minesweeper from \"./Minesweeper\";\nimport { useState } from \"react\";\n\nexport default function App() {\n  const [level, setLevel] = useState(1);\n  return (\n    <div className=\"App\">\n      <h1>Minesweeper</h1>\n      <label htmlFor=\"\">\n        Select Level:{\" \"}\n        <input\n          className=\"level-select\"\n          onChange={(e) => setLevel(e.target.value)}\n          type=\"number\"\n          min={1}\n          max={16}\n          value={level}\n        />\n      </label>\n      <Minesweeper level={level} />\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}